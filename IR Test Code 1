#include "MeMCore.h"
#define PORT_1 4
#include <Arduino.h>
#include <Wire.h>
#include <SoftwareSerial.h>
#define TIMEOUT 30000
#define WAITING_TIME 1000
#define ULTRASONIC 10
#include <MeMCore.h>

MeDCMotor motor_9(9);
MeDCMotor motor_10(10);    

void move(int direction, int speed)
{
      int leftSpeed = 0;
      int rightSpeed = 0;
      if(direction == 1){
          leftSpeed = speed;
          rightSpeed = speed;
      }else if(direction == 2){
          leftSpeed = -speed;
          rightSpeed = -speed;
      }else if(direction == 3){
          leftSpeed = -speed;
          rightSpeed = speed;
      }else if(direction == 4){
          leftSpeed = speed;
          rightSpeed = -speed;
      }
      motor_9.run((9)==M1?-(leftSpeed):(leftSpeed));
      motor_10.run((10)==M1?-(rightSpeed):(rightSpeed));
}

int left_sensor; // within s1
int right_sensor; // on s2
int power = 11;
MePort MePort(PORT_1);

void setup() {
  Serial.begin(9600);
  pinMode(power, INPUT);
}
void loop() {
  digitalWrite(power, HIGH);
  left_sensor = MePort.aRead1();
  Serial.print(left_sensor);
  Serial.print(" ");
  Serial.println(right_sensor);
  right_sensor = MePort.aRead2();
  if (left_sensor <= 700) {
  move(4, 255);
  delay(100);
  move(1, 255);
  }
  if (right_sensor <= 700) {
   move(3, 255);
   delay(100);
   move(1, 255);
  }
  }
